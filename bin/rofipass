#!/bin/sh

set -e

password_store=${PASSWORD_STORE_DIR-~/.password_store}
password_fname=$(find "${password_store}" -type f -name '*.gpg' -printf '%P\n' |
                 sed -e 's/\.gpg$//'                                           |
                 sort                                                          |
                 rofi -dmenu -p 'pass')

if [ -n "${password_fname:+set}" ]; then
    pass -c "${password_fname}" 1>/dev/null 2>&1
fi
